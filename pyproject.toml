# SPDX-FileCopyrightText: 2019-2021 Pynguin Contributors
#
# SPDX-License-Identifier: LGPL-3.0-or-later

[tool.poetry]
name = "pynguin"
version = "0.9.3"
description = "Pynguin is a tool for automated unit test generation for Python"
authors = ["Stephan Lukasczyk <stephan@lukasczyk.me>"]
license = "LGPL-3.0-or-later"
readme = "README.md"
repository = "https://github.com/se2p/pynguin"
documentation = "https://pynguin.readthedocs.io"
keywords = [
    "unit test",
    "random testing",
    "search based",
    "test generation"
]
classifiers = [
    "Development Status :: 3 - Alpha",
    "Environment :: Console",
    "Intended Audience :: Developers",
    "Intended Audience :: Education",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: GNU Lesser General Public License v3 or later (LGPLv3+)",
    "Operating System :: MacOS :: MacOS X",
    "Operating System :: Microsoft :: Windows",
    "Operating System :: POSIX :: Linux",
    "Programming Language :: Python :: 3.8",
    "Programming Language :: Python :: 3.9",
    "Topic :: Education :: Testing",
    "Topic :: Software Development :: Testing",
    "Topic :: Software Development :: Testing :: Unit",
    "Typing :: Typed",
]

[tool.poetry.dependencies]
python = "^3.8"
astor = "^0.8.1"
simple-parsing = "^0.0.15"
bytecode = "^0"
typing_inspect = "^0"
jellyfish = "^0"
networkx = {extras = ["pydot"], version = "^2"}
pydot = "^1.4"
rich = "^10.3"
pytest = "^6.2"
mutpy = { git = "https://github.com/f-str/mutpy", branch = "pynguin" }
Jinja2 = "^3.0.1"
Pygments = "^2.9.0"
ordered-set = "^4.0.2"

[tool.poetry.dev-dependencies]
coverage = "^5.5"
pytest = "^6.2"
black = {version = "^21.6b0", allow-prereleases = true}
pytest-cov = "^2.12"
pylint = "^2.8"
pytest-sugar = "^0.9"
pytest-picked = "^0.4"
pytest-xdist = "^2.2"
hypothesis = "^6.14"
pytest-mock = "^3.6"
mypy = "^0.910"
isort = {extras = ["pyproject"], version = "^5.8"}
pre-commit = "^2.13"
darglint = "^1.8"
pyupgrade = "^2.19"
bandit = "^1.7"
safety = "^1.10"
sphinx = "^4.0"
sphinx-autodoc-typehints = "^1.12"
flake8 = "^3.9"
pytest-bdd = "^4.0"

[tool.poetry.scripts]
pynguin = "pynguin.cli:main"

[tool.black]
line-length = 88
target_version = ['py38']
include = '\.pyi?$'
exclude = '''

(
  /(
      \.eggs          # exclude a few common directories in the
    | \.git           # root of the project
    | \.pytest_cache
    | \.mypy_cache
    | \.venv
    | _build
    | build
    | dist
    | pynguin.egg-info
  )/
)
'''

[tool.coverage.run]
branch = true
source = ["pynguin", "tests"]
omit = ["tests/fixtures/*"]

[tool.coverage.report]
exclude_lines = [
  "pragma: no cover",
  "def __repr__",
  "def __str__",
  "raise AssertionError",
  "raise NotImplementedError",
  "if __name__ == .__main__.:",
]

[tool.coverage.html]
directory = "cov_html"

[tool.isort]
line_length=88
multi_line_output=3
include_trailing_comma=true
indent='    '

[tool.mypy]
check_untyped_defs = true
ignore_errors = false
ignore_missing_imports = true
strict_optional = true
warn_unused_ignores = true
warn_redundant_casts = true
warn_unused_configs = true

[tool.pytest.ini_options]
minversion = "6.0.0rc1"
# Always using Coverage.py disables debugging.
# addopts = "--cov=pynguin --cov-branch --cov-report html:cov_html --cov-report=term-missing"
testpaths = [
  "tests",
]
# A lot of our own classes start with Test so pytest will pick them up during test collection.
# But they don't actually contains tests, so we set an empty matcher for the class name.
python_classes = ''
bdd_features_base_dir = "tests/features/"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"
